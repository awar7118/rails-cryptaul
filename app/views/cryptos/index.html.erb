  <div class="banner-articles">
    <div class="main-title">
      <h1>CRYPTO STATS</h1>
    </div>
  </div>

<div class= "container centered col-8 m-auto">
  <table class='table'>
    <thead>
      <tr>
        <th>Name</th>
        <th>Price</th>
        <th>24hr change (%)</th>
        <th>Graph</th>
        <th>Watchlist</th>
        <%# <th>7 day chart</th> %>
      </tr>
    </thead>
    <tbody>
      <%@cryptos.each do |crypto| %>
        <tr>
          <td>
            <%= link_to(image_tag(crypto.image), crypto_path(crypto),class: "crypto-image")%> <%=crypto.name%>
          </td>
          <td>
            £<%=(crypto.histories.last.price).round(2) %>
          </td>
          <td>
          <% if crypto.previousdaypercentagechange.negative?() %>
          <div class = "red-font">
          <%= crypto.previousdaypercentagechange %>
          </div>
          <% else %>
          <div class = "green-font">
          <%= crypto.previousdaypercentagechange %>
          </div>
          <% end %>
          </td>
            <td>
          <% @price_data = crypto.histories.map do |price| %>
            <% [price.date, price.price] %>
          <% end %>
          <div class="rounded">
            <%= line_chart @price_data, points: false, prefix: "£", round: 2, zeros: true, colors: ['#EE841C'], height: "100px" %>
          </div>
        </td>
        <td>
             <% if crypto.watchlists.count > 0 %>
              <%= link_to '- Watchlist', watchlist_path(crypto.watchlists.first), method: :delete, class: "wl-inactive"%>
            <% else %>
             <%= simple_form_for [ crypto, @watchlist ] do |f| %>
              <div>
                <%= f.submit '+ Watchlist', class: "wl-active" %>
              </div>
            <% end %>
            <% end %>
          </td>
        </tr>
     <% end %>
    </tbody>
  </table>
</div>
